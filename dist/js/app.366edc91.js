(function(){var t={9728:function(t,e,s){"use strict";var a=s(6369),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view",{scopedSlots:t._u([{key:"default",fn:function({Component:t}){return[e("keep-alive",[e(t,{tag:"component"})],1)]}}])})],1)},n=[],o=s(1001),r={},c=(0,o.Z)(r,i,n,!1,null,null,null),l=c.exports,u=s(2631),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"page_body"},[e("div",{staticClass:"box"},[e("div",{staticClass:"title"},[t._v("请输入店铺账号密码")]),e("div",{staticClass:"list-item"},[e("i",{staticClass:"iconfont icon-zhanghu"}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input-box",attrs:{focus:t.focusUsername,placeholder:"请输入账号"},domProps:{value:t.username},on:{blur:function(e){t.focusUsername=!1},input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"list-item"},[e("i",{staticClass:"iconfont icon-suo"}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input-box",attrs:{focus:t.focusPassword,clearable:"",type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{blur:function(e){t.focusPassword=!1},input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("div",{staticClass:"action"},[e("div",{staticClass:"label",on:{click:t.checkRemenber}},[e("i",{staticClass:"iconfont",class:t.isRemenber?"icon-xuanzhong1":"icon-weixuan"}),e("span",[t._v("记住密码")])]),e("div",{staticClass:"label",on:{click:t.checkAuto}},[e("i",{staticClass:"iconfont",class:t.isAuto?"icon-xuanzhong1":"icon-weixuan"}),e("span",[t._v("自动登录")])])]),e("button",{staticClass:"btn primary",on:{click:t.pwdLogin}},[t._v("登 录")])])]),e("div",{staticClass:"page_bottom"},[e("div",{staticClass:"date-box"},[e("div",{staticClass:"time"},[t._v(t._s(t.time))]),e("div",{staticClass:"date"},[t._v(t._s(t.date))])])])])},h=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page_header"},[e("div",{staticClass:"logo"},[e("img",{attrs:{src:"https://xihu-oss.oss-cn-hangzhou.aliyuncs.com/xihu-meals/logo.png",alt:"logo"}})]),e("div",{staticClass:"name-box"},[e("div",{staticClass:"name"},[t._v("志驿 "),e("span",[t._v("•")]),t._v(" 西湖驿站")]),e("div",{staticClass:"pingxing"},[t._v("ZHIYI"),e("span"),t._v("XIHUYIZHAN")])])])}],m=(s(7658),s(8848)),p=s(4161),v=s(5410),f=s.n(v);let g={env:"production",proxy:{development:"",production:"",pre:"https://zyxh.maytek.cn",online:"https://xhyz.maytek.cn"}};function y(t){if("object"!==typeof t)return void console.warn("参数必须是对象");let e=!!t.loading&&t.loading;e&&m.Z.loading({message:"加载中...",forbidClick:!0,transition:"fade",duration:3e5});let s=window.localStorage.getItem("merchantCode")??"",a=t.data?Object.assign({merchantCode:s},t.data):{merchantCode:s},i=t.baseUrl?t.baseUrl:g.proxy[g.env],n=i+t.url,o=t.method,r=a?f().stringify(a):null,c=t.params?f().stringify(t.params,{arrayFormat:"brackets"}):null,l={"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded; charset=utf-8"};return Object.assign(l,t.headers),l["Content-Type"].indexOf("application/json")>-1&&(r=JSON.stringify(t.data)),(0,p.Z)({url:n,method:o,crossDomain:!0,headers:l,params:c,paramsSerializer:function(t){return t},data:r,timeout:5e4,responseType:"json",maxContentLength:2e3,validateStatus:function(e){let s;switch(e){case 400:s="请求错误";break;case 401:s="未授权，请登录";break;case 403:s="拒绝访问";break;case 404:s=`请求地址出错: ${t.url}`;break;case 408:s="请求超时";break;case 500:s="服务器内部错误";break;case 501:s="服务未实现";break;case 502:s="网关错误";break;case 503:s="服务不可用";break;case 504:s="网关超时";break;case 505:s="HTTP版本不受支持";break;default:break}return s&&(0,m.Z)({type:"warning",message:s,duration:3e3,showClose:!0}),e>=200&&e<300}}).then((s=>(e&&m.Z.clear(),_(s.data,t)))).catch((t=>{e&&m.Z.clear(),console.log("请求失败",t)}))}function _(t,e){let{successToast:s=!1,resAll:a=!1}={...e},i=[200,void 0,1].includes(t.code?t.code:t.status);return i&&!s||(0,m.Z)({type:"warning",message:s&&e.successMsg?e.successMsg:t.msg,duration:i?1e3:3e3,showClose:!0,onClose:()=>{t.msg.includes("重新登录")&&Mt.push("/login")}}),a?t:t.content}function b(t){return y({url:"/LoginWS/login.xyz",data:t,method:"POST",loading:!0,resAll:!0})}function w(t){return y({url:"/LoginWS/decideLogin.do",data:t,method:"POST",loading:!0,resAll:!0})}function C(t){return y({url:"/api/diancanMallMerchant/getMallMerchantCode.do",data:t,method:"POST",loading:!1,resAll:!0})}var S=s(9564),x=s.n(S),k=s(5743),T=s.n(k);function O(t){let e=new Date;e.setDate(e.getDate()+7);let s="xyzxyzxyzxyzxyzxyzxyzxyzxyzxyz="+t+";expires="+e.toGMTString()+";path=/";document.cookie=s}function I(){document.cookie="xyzxyzxyzxyzxyzxyzxyzxyzxyzxyz=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}function M(t){let e,s=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return document.cookie.match(s)?e[2]:null}function L(t){(0,m.Z)({message:t})}function D(t){let e,s=document.createElement("textarea");s.value=t,s.readOnly="readOnly",document.body.appendChild(s),s.select(),s.setSelectionRange(0,t.length),L("复制成功"),e=document.execCommand("copy"),s.remove()}var A={md5:x(),dayjs:T(),cookie_login:O,cookie_loginout:I,cookie_get:M,showToast:L,copy:D},P={data(){return{username:"",password:"",focusUsername:!1,focusPassword:!1,isRemenber:!1,isAuto:!1,time:"",date:""}},methods:{initSystem(){this.listenEnter(),this.renderDate(),this.getLocalStorage()},listenEnter(){document.onkeydown=t=>{var e=t||window.event;e&&13==e.keyCode&&this.pwdLogin()}},renderDate(){let t=["天","一","二","三","四","五","六"];this.date=this.$util.dayjs().format("YYYY年MM月DD日 星期")+t[this.$util.dayjs().day()],this.time=this.$util.dayjs().format("HH:mm"),setInterval((()=>{this.time=this.$util.dayjs().format("HH:mm")}),1e3)},getLocalStorage(){let t=window.localStorage.getItem("username"),e=window.localStorage.getItem("password"),s=window.localStorage.getItem("isRemenber"),a=window.localStorage.getItem("isAuto");(s||a)&&(this.username=t,this.password=e),s&&(this.isRemenber=!0),a&&(this.isAuto=!0),a&&this.pwdLogin()},async pwdLogin(){if(!this.password.length)return this.focusPassword=!0,this.$toast({message:"请输入密码",icon:"none",duration:3e3});if(!this.username.length)return this.focusUsername=!0,this.$toast({message:"请输入用户名",icon:"none",duration:3e3});let t=window.localStorage.getItem("password"),e=t==this.password?this.password:this.$util.md5(this.password).substr(8,16),s=await b({username:this.username,password:e,loginUsername:this.username,phoneType:"pc",phoneCode:"pc",loginLang:"zh"});if(!s.content)return void this.$util.showToast(s.msg);let a=s.content.apikey;this.$util.cookie_login(a);let i=await w();if(!i)return;window.top.buttonList=i.content.buttonList;let n=await C();1==n.status&&200==n.code&&(window.localStorage.setItem("merchantCode",n.content.merchantCode),window.localStorage.setItem("accountInfo",JSON.stringify(n.content)),this.$router.push("/main/order"))},checkRemenber(){if(this.isRemenber=!this.isRemenber,this.isRemenber)return window.localStorage.setItem("isRemenber",!0),void this.setAccount(!0);window.localStorage.removeItem("isRemenber"),this.isAuto||this.setAccount(!1)},checkAuto(){if(this.isAuto=!this.isAuto,this.isAuto)return window.localStorage.setItem("isAuto",!0),void this.setAccount(!0);window.localStorage.removeItem("isAuto"),this.isRemenber||this.setAccount(!1)},setAccount(t){let e=window.localStorage.getItem("password");if(t){window.localStorage.setItem("username",this.username);let t=e==this.password?this.password:this.$util.md5(this.password).substr(8,16);console.log("local",e,"password",this.password),window.localStorage.setItem("password",t)}else window.localStorage.removeItem("username"),window.localStorage.removeItem("password"),e==this.password&&(this.password="")}},mounted(){this.initSystem()}},$=P,R=(0,o.Z)($,d,h,!1,null,"62e1d250",null),z=R.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container page"},[e("nav",[e("div",{staticClass:"nav"},t._l(t.navList,(function(s,a){return e("div",{staticClass:"list-item",class:t.$route.meta.activeMenu==s.path?"active":"",on:{click:function(e){return t.toPage(s)}}},[e("img",{attrs:{src:t.$route.meta.activeMenu==s.path?s.selectImg:s.unSelectImg,alt:""}}),e("div",[t._v(t._s(s.title))])])})),0),e("img",{staticClass:"logo",attrs:{src:t.accountInfo.merchantImg}})]),e("router-view",{staticClass:"main"})],1)},N=[],Z={name:"Main",data(){return{navList:[{title:"订单",icon:"",path:"/main/order",selectImg:"https://xihu-oss.oss-cn-hangzhou.aliyuncs.com/xihu-meals/order_black.png",unSelectImg:"https://xihu-oss.oss-cn-hangzhou.aliyuncs.com/xihu-meals/order_white.png"},{title:"设置",icon:"",path:"/main/set",selectImg:"https://xihu-oss.oss-cn-hangzhou.aliyuncs.com/xihu-meals/set_black.png",unSelectImg:"https://xihu-oss.oss-cn-hangzhou.aliyuncs.com/xihu-meals/set_white.png"}],accountInfo:{merchantImg:""}}},methods:{initSystem(){this.getAccountInfo()},getAccountInfo(){let t=JSON.parse(window.localStorage.getItem("accountInfo"));t.merchantImg=""==t.merchantImg?"https://xihu-oss.oss-cn-hangzhou.aliyuncs.com/xihu-meals/logo.png":t.merchantImg,this.accountInfo=t},toPage(t){this.$router.push(t.path)}},beforeMount(){this.initSystem()}},j=Z,Y=(0,o.Z)(j,E,N,!1,null,"9a4e3d7e",null),F=Y.exports,H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("Navigation",{attrs:{title:"订单列表","is-back":!1}}),e("div",{staticClass:"page_header"},[e("div",{staticClass:"quik"},t._l(t.timeTab,(function(s,a){return 3!=a?e("div",{staticClass:"list-item",class:t.currentTime==a?"active":"",on:{click:function(e){return t.changeTime(a)}}},[t._v(t._s(s.text))]):t._e()})),0),e("div",{staticClass:"time-box"},[e("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.timePicker},model:{value:t.customTime,callback:function(e){t.customTime=e},expression:"customTime"}})],1),e("div",{staticClass:"search-box"},[e("div",{staticClass:"query"},[e("el-select",{staticClass:"querySelect",model:{value:t.textKey,callback:function(e){t.textKey=e},expression:"textKey"}},[e("el-option",{key:"orderMainnum",attrs:{label:"订单号",value:"orderMainnum"}}),e("el-option",{key:"buyerTelephone",attrs:{label:"手机号",value:"buyerTelephone"}})],1)],1),e("div",{staticClass:"textInput"},[e("el-input",{attrs:{placeholder:"请输入"+("orderMainnum"==t.textKey?"订单号":"手机号"),clearable:""},on:{focus:t.listenEnter},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1)]),e("div",{staticClass:"btn",on:{click:function(e){return t.$refs.orderScroll.run()}}},[t._v("查询")])]),e("div",{staticClass:"page_body"},[e("div",{staticClass:"section-l"},[e("div",{staticClass:"tab-box"},t._l(t.typeList,(function(s,a){return e("div",{staticClass:"tab",class:t.currentType==a?"active":"",on:{click:function(e){return t.changeType(a)}}},[t._v(t._s(s.text))])})),0),e("div",{staticClass:"status-box"},t._l(t.typeList[t.currentType].list,(function(s,a){return e("div",{staticClass:"status",class:s.check?"check":"",on:{click:function(e){return t.selectStatus(s)}}},[t._v(t._s(s.text))])})),0),e("div",{staticClass:"orderList"},[e("ScrollView",{ref:"orderScroll",attrs:{"get-data":t.getOrderList,enableRefresh:!0},scopedSlots:t._u([{key:"container",fn:function({list:s}){return[e("div",{staticClass:"list-box"},t._l(s,(function(s,a){return e("div",{staticClass:"list-item",class:t.currentOrder==s.orderMainnum?"active":"",on:{click:function(e){return t.getOrderInfo(s)}}},[e("div",{staticClass:"order"},[t._v("订单编号："+t._s(s.orderMainnum))]),e("div",{staticClass:"time"},[t._v(t._s(s.createDate))]),e("div",{staticClass:"info"},[e("div",{staticClass:"money"},[t._v("订单总价：￥"+t._s(s.totalPrice))]),e("div",{staticClass:"status"},[e("span",[t._v(t._s(s.orderStatusName))]),e("i"),e("span",[t._v(t._s("DCJ"==s.orderSource?"点餐机":"小程序")+"下单")]),e("i"),e("span",[t._v(t._s(0==s.isPickup?"堂食":"自提"))])])])])})),0)]}}])})],1)]),e("div",{staticClass:"section-r"},[e("div",{staticClass:"title"},[e("div",{directives:[{name:"show",rawName:"v-show",value:""==!t.orderInfo.orderStatusName,expression:"!orderInfo.orderStatusName == ''"}],staticClass:"status"},[t._v("["+t._s(t.orderInfo.orderStatusName)+"]")]),e("div",{staticClass:"pickNo"},[t._v("取餐码："+t._s(t.orderInfo.pickupCode))])]),e("div",{staticClass:"table-box"},[e("div",{staticClass:"table-body"},[t._m(0),t._l(t.orderInfo.orderSubcoreList,(function(s,a){return e("div",{staticClass:"table-row"},[e("div",{staticClass:"cell"},[t._v(t._s(s.productName)+t._s(s.skuName))]),e("div",{staticClass:"cell"},[t._v(t._s(s.price))]),e("div",{staticClass:"cell"},[t._v(t._s(s.num))]),e("div",{staticClass:"cell"},[t._v(t._s(s.price*s.num))])])}))],2)]),e("div",{staticClass:"orderInfo"},[e("div",{staticClass:"list-item"},[t._v("菜品总价："+t._s(t.orderInfo.payMoney))]),e("div",{staticClass:"list-item"},[t._v("打包费："+t._s(t.orderInfo.bagPrice))]),e("div",{staticClass:"list-item"},[t._v("订单总价："+t._s(t.orderInfo.payMoney))])]),e("div",{staticClass:"action"},[t.typeList[t.currentType].value.includes("ASSORTED_FOOD")||t.typeList[t.currentType].value.includes("ASSORTED_FINISH")?e("div",{staticClass:"cancel",on:{click:t.cancel}},[t._v("取消订单")]):t._e(),t.typeList[t.currentType].value.includes("ASSORTED_FOOD")?e("div",{staticClass:"finish",on:{click:function(e){return t.changeStatus("ASSORTED_FINISH","您确认配餐完成？")}}},[t._v("配餐完成")]):t._e(),t.typeList[t.currentType].value.includes("ASSORTED_FINISH")?e("div",{staticClass:"finish",on:{click:function(e){return t.broadcast("REFUSAL_ORDER","您确认通知？")}}},[t._v("通知取餐")]):t._e(),t.typeList[t.currentType].value.includes("PAY")?e("div",{staticClass:"cancel",on:{click:function(e){return t.changeStatus("RECEIV_ORDER","您确认接单？")}}},[t._v("接单")]):t._e(),t.typeList[t.currentType].value.includes("PAY")?e("div",{staticClass:"finish",on:{click:function(e){return t.changeStatus("REFUSAL_ORDER","您确认拒单？")}}},[t._v("拒单")]):t._e()])])]),e("CancelOrder",{ref:"cancleOrder",attrs:{orderMainnum:t.currentOrder,payMoney:t.orderInfo.payMoney}})],1)},U=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-header"},[e("div",[t._v("菜品名称")]),e("div",[t._v("单价")]),e("div",[t._v("数量")]),e("div",[t._v("总价")])])}],q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav"},[e("div",{staticClass:"nav-c"},[e("span",[t._v(t._s(t.title))])]),t.isBack?e("div",{staticClass:"nav-r",on:{click:t.back}},[e("div",{staticClass:"iconfont icon-left"}),e("span",[t._v("返回")])]):t._e()])},K=[],W={name:"Navigation",props:{title:{type:String,default:""},isBack:{type:Boolean,default:!0}},data(){return{}},watch:{title(){}},methods:{back(){this.$router.back()}}},B=W,J=(0,o.Z)(B,q,K,!1,null,"28e28a1f",null),V=J.exports,X=function(){var t=this,e=t._self._c;return t.show?e("div",{staticClass:"dialog-box cancelOrder"},[e("div",{staticClass:"dialog"},[e("div",{staticClass:"page_header"},[e("div",{staticClass:"title"},[t._v("取消订单")]),e("div",{staticClass:"close",on:{click:t.close}},[e("i",{staticClass:"iconfont icon-guanbi"})])]),e("div",{staticClass:"page_body"},[e("div",{staticClass:"list-box"},[e("div",{staticClass:"list-item"},[e("div",{staticClass:"title"},[e("div",[t._v("退款金额")]),t._v(" "),t.moneyError?e("div",{staticClass:"red"},[e("span",[t._v("最多可退")]),e("span",[t._v(t._s(t.payMoney))])]):t._e()]),e("div",{staticClass:"item-box"},[e("el-input",{staticClass:"money-input",attrs:{placeholder:"请输入金额",clearable:""},on:{focus:t.listenEnter},model:{value:t.money,callback:function(e){t.money=e},expression:"money"}})],1)]),e("div",{staticClass:"list-item"},[t._m(0),e("div",{staticClass:"item-box"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择取消原因"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("div",{staticClass:"list-item"},[t._m(1),e("div",{staticClass:"item-box"},[e("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入补充说明",resize:"none"},on:{focus:t.listenEnter},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)])])]),e("div",{staticClass:"page_bottom"},[e("div",{staticClass:"action"},[e("div",{staticClass:"btn",on:{click:t.cancel}},[t._v("确 定")])])])])]):t._e()},G=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("div",[t._v("退款原因")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("div",[t._v("补充说明")])])}],Q=s(5348);function tt(t){return y({url:"/api/activityWeb/foodCart/getOrderCoreInfo",data:t,method:"POST",loading:!1})}function et(t){return y({url:"/api/activityWeb/foodCart/updateOrderStatus.do",data:t,method:"POST",loading:!0,resAll:!0})}var st={components:{},name:"CancelOrder",props:{orderMainnum:{type:String,default:""},payMoney:{type:Number,default:0}},data(){return{show:!1,money:0,moneyError:!1,options:[{label:"菜品库存不足",value:"菜品库存不足"},{label:"菜品质量问题",value:"菜品质量问题"},{label:"顾客要求取消",value:"顾客要求取消"},{label:"其他",value:"其他"}],reason:"",remark:""}},watch:{async show(t,e){t&&this.initSystem()}},methods:{initSystem(){this.money=this.payMoney,this.moneyError=!1,this.reason="",this.remark=""},cancel(){Number(this.money)?Number(this.money)>this.payMoney?this.moneyError=!0:(this.moneyError=!1,""!=this.reason.trim()?Q.Z.confirm({title:"操作提示",message:"您选择取消订单？"}).then((()=>{console.log("金额",this.money),console.log("退款原因",this.reason),console.log("补充说明",this.remark)})).catch((()=>{})):this.$util.showToast("请选择取消原因")):this.$util.showToast("请输入数字金额")},async postOrderStatus(t){let e=await et({orderMainnum:this.currentOrder,orderStatus:t});e&&(this.$util.showToast("操作成功"),this.initSystem())},listenEnter(){document.onkeydown=t=>{var e=t||window.event;e&&e.keyCode}},close(){this.show=!1}},mounted(){}},at=st,it=(0,o.Z)(at,X,G,!1,null,"0f5fb714",null),nt=it.exports,ot=function(){var t=this,e=t._self._c;return e("div",{class:["scroll_container",t.scrollClass]},[e("div",{staticClass:"page_body"},[e("van-pull-refresh",{staticClass:"refresh-wrap",attrs:{disabled:!t.enableRefresh},on:{refresh:t.refresh},model:{value:t.isTriggered,callback:function(e){t.isTriggered=e},expression:"isTriggered"}},[e("van-list",{staticClass:"scroll-wrap",attrs:{finished:t.finished,"immediate-check":t.autoUpdate,"finished-text":"没有更多了"},on:{load:t.scrollToLower},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t._t("container",null,{list:t.ListData})],2)],1),0==t.ListData.length?e("div",{class:["empty","1"==t.emptyType?"type1":"type2"]},["2"==t.emptyType?t._t("empty"):t._e()],2):t._e()],1),e("div",{staticClass:"page_bottom"})])},rt=[],ct={name:"ScrollView",props:{getData:{type:Function,default:null},autoUpdate:{type:Boolean,default:!1},enableRefresh:{type:Boolean,default:!1},scrollClass:{type:String,default:""},emptyType:{type:String,default:"2"}},data(){return{ListData:[],page:1,isLoading:!1,finished:!1,isTriggered:!1,noMore:!1}},methods:{async scrollToLower(t){if(1==this.page)return this.isLoading=!1;await this.run(this.page)},async refresh(){await this.run(),this.isTriggered=!1},async run(t=1){if(1==t&&(this.ListData=[],this.noMore=!1,this.finished=!1,this.page=1,this.isLoading=!1),this.noMore)return void(this.finished=1!=t);let e=await this.getData.call(this.$parent,t);this.isLoading=!1,e&&(this.ListData=1==t?(new Array).concat(e):this.ListData.concat(e),t++,this.page=t,this.noMore=0==e.length)}},mounted(){this.autoUpdate&&this.run()}},lt=ct,ut=(0,o.Z)(lt,ot,rt,!1,null,"362951b5",null),dt=ut.exports;function ht(t){return y({url:"/api/activityWeb/foodCart/queryOrderDcj",data:t,method:"POST",loading:!1})}function mt(t){return y({url:"/api/activityWeb/foodCart/sendOrderMessage.do",data:t,method:"POST",loading:!0,successToast:!0,successMsg:"通知成功",resAll:!0})}var pt={components:{Navigation:V,ScrollView:dt,CancelOrder:nt},name:"Order",data(){return{timeTab:[{text:"今天",value:""},{text:"昨天",value:""},{text:"一周",value:""},{text:"custom",value:""}],currentTime:0,customTime:"",textKey:"orderMainnum",searchText:"",typeList:[{text:"点餐机订单",key:"DCJ",value:"ASSORTED_FOOD",list:[{text:"配餐中",key:"ASSORTED_FOOD",check:!0},{text:"配餐完成",key:"ASSORTED_FINISH",check:!1},{text:"交易完成",key:"FINISH",check:!1}]},{text:"小程序订单",key:"app",value:"PAY",list:[{text:"已支付",key:"PAY",check:!0},{text:"配餐中",key:"ASSORTED_FOOD",check:!1},{text:"配餐完成",key:"ASSORTED_FINISH",check:!1},{text:"交易完成",key:"FINISH",check:!1}]}],currentType:0,orderStatus:"",orderList:[],currentOrder:"",orderInfo:{orderStatusName:"",pickupCode:"",orderMainnum:"",orderSubcoreList:[],bagPrice:0,num:0,payMoney:0}}},methods:{initSystem(){this.currentOrder="",this.orderInfo={},this.initTime(),this.$refs.orderScroll.run()},initTime(){let t=this.$util.dayjs().format("YYYY-MM-DD"),e=this.$util.dayjs().subtract(1,"day").format("YYYY-MM-DD"),s=this.$util.dayjs().subtract(7,"day").format("YYYY-MM-DD");this.timeTab[0].value=t+"^doubleDate^"+t,this.timeTab[1].value=e+"^doubleDate^"+e,this.timeTab[2].value=s+"^doubleDate^"+e},async getOrderList(t){let e=await ht({page:t,rows:10,orderSource:this.typeList[this.currentType].key,orderStatus:this.typeList[this.currentType].value,createDate:this.timeTab[this.currentTime].value,orderMainnum:"orderMainnum"==this.textKey?this.searchText:"",buyerTelephone:"buyerTelephone"==this.textKey?this.searchText:""});if(e)return this.orderList=e.rows,e.rows},changeTime(t){this.currentTime=t,this.$refs.orderScroll.run()},timePicker(t){this.timeTab[3].value=t?t[0]+"^doubleDate^"+t[1]:"",this.changeTime(3)},changeType(t){this.currentType=t,this.currentOrder="",this.orderInfo={},this.$refs.orderScroll.run()},selectStatus(t){this.typeList[this.currentType].value="",this.typeList[this.currentType].list.forEach((e=>{e.check=e.key==t.key&&!t.check,e.check&&(this.typeList[this.currentType].value=e.key)})),this.currentOrder="",this.orderInfo={},this.$refs.orderScroll.run()},async getOrderInfo(t){this.currentOrder=t.orderMainnum;let e=await tt({orderMainnum:t.orderMainnum});e&&(this.orderInfo=e)},cancel(){""!=this.currentOrder?this.$refs.cancleOrder.show=!0:this.$util.showToast("您还没有选择订单")},changeStatus(t,e){""!=this.currentOrder?Q.Z.confirm({title:"操作提示",message:e}).then((()=>{this.postOrderStatus(t)})).catch((()=>{})):this.$util.showToast("您还没有选择订单")},async postOrderStatus(t){let e=await et({orderMainnum:this.currentOrder,orderStatus:t});e.content&&(200==e.content.code?(this.$util.showToast("操作成功"),this.initSystem()):this.$util.showToast(e.content.msg))},broadcast(t,e){""!=this.currentOrder?Q.Z.confirm({title:"操作提示",message:e}).then((()=>{this.postMessage()})).catch((()=>{})):this.$util.showToast("您还没有选择订单")},async postMessage(){await mt({orderMainnum:this.currentOrder})},listenEnter(){document.onkeydown=t=>{var e=t||window.event;e&&13==e.keyCode&&this.$refs.orderScroll.run()}},cancelListenEnter(){document.onkeydown=()=>{}}},mounted(){this.initSystem()},beforeRouteLeave(t,e,s){this.cancelListenEnter(),s()}},vt=pt,ft=(0,o.Z)(vt,H,U,!1,null,"70d8e093",null),gt=ft.exports,yt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("Navigation",{attrs:{title:"配置",isBack:!1}}),e("div",{staticClass:"page_body"},[e("div",{staticClass:"plate",on:{click:function(e){return t.topPage("/main/foodSet")}}},[e("img",{staticClass:"food",attrs:{src:"https://xihu-oss.oss-cn-hangzhou.aliyuncs.com/xihu-meals/commoditySet.png",alt:"food"}}),t._v(" 菜品设置 ")]),e("div",{staticClass:"plate",on:{click:function(e){return t.topPage("/main/shopSet")}}},[e("img",{staticClass:"shop",attrs:{src:"https://xihu-oss.oss-cn-hangzhou.aliyuncs.com/xihu-meals/shopSet.png",alt:"shop"}}),t._v(" 店铺设置 ")]),e("div",{staticClass:"plate",on:{click:function(e){return t.quit()}}},[e("img",{staticClass:"quit",attrs:{src:"https://xihu-oss.oss-cn-hangzhou.aliyuncs.com/xihu-meals/quit.png",alt:"quit"}}),t._v(" 退出登录 ")])])],1)},_t=[],bt={components:{Navigation:V},name:"Set",data(){return{}},methods:{topPage(t){},quit(){this.$util.cookie_loginout(),window.localStorage.setItem("merchantCode",""),window.localStorage.setItem("accountInfo",""),this.$router.push("/login")}},mounted(){}},wt=bt,Ct=(0,o.Z)(wt,yt,_t,!1,null,"686e5a7f",null),St=Ct.exports;const xt=[{path:"order",name:"Order",component:gt,meta:{title:"订单",activeMenu:"/main/order"}},{path:"set",name:"Set",component:St,meta:{title:"设置",activeMenu:"/main/set"}}];var kt=xt;const Tt=u.ZP.prototype.push;u.ZP.prototype.push=function(t){return Tt.call(this,t).catch((t=>t))},a["default"].use(u.ZP);const Ot=[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:z},{path:"/main",name:"main",component:F,meta:{keepAlive:!0},children:kt}],It=new u.ZP({routes:Ot});var Mt=It,Lt=s(3822);a["default"].use(Lt.ZP);var Dt=new Lt.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),At=s(6856),Pt=(s(2999),s(5110),s(8499)),$t=s.n(Pt);a["default"].use(At.ZP),a["default"].use($t()),a["default"].config.productionTip=!1,a["default"].prototype.$util=A,new a["default"]({router:Mt,store:Dt,render:t=>t(l)}).$mount("#app")},4654:function(){}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=t,function(){s.amdO={}}(),function(){var t=[];s.O=function(e,a,i,n){if(!a){var o=1/0;for(u=0;u<t.length;u++){a=t[u][0],i=t[u][1],n=t[u][2];for(var r=!0,c=0;c<a.length;c++)(!1&n||o>=n)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(r=!1,n<o&&(o=n));if(r){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[a,i,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,n,o=a[0],r=a[1],c=a[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(c)var u=c(s)}for(e&&e(a);l<o.length;l++)n=o[l],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},a=self["webpackChunkplstool"]=self["webpackChunkplstool"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(9728)}));a=s.O(a)})();
//# sourceMappingURL=app.366edc91.js.map